<!DOCTYPE html>
<html data-html-server-rendered="true" lang="en" data-vue-tag="%7B%22lang%22:%7B%22ssr%22:%22en%22%7D%7D">
  <head>
    <title>Orientação a objetos (1) - lidando com estados sem o uso de estruturas condicionais - Ghiorzi&#x27;s blog</title><meta name="gridsome:hash" content="21e8d6024374c8b3453b554d6d762f3435f72b44"><meta data-vue-tag="ssr" charset="utf-8"><meta data-vue-tag="ssr" name="generator" content="Gridsome v0.7.23"><meta data-vue-tag="ssr" data-key="viewport" name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover"><meta data-vue-tag="ssr" data-key="format-detection" name="format-detection" content="telephone=no"><meta data-vue-tag="ssr" name="description" content="Há quem diga dominar o paradigma orientado a objetos e há quem considere questionável esta assertiva. Em qual destes grupos você se encaixa?"><meta data-vue-tag="ssr" name="image" content="/assets/static/Lidando%20com%20estados%20sem%20o%20uso%20de%20estruturas%20condicionais.07cc2b7.462f5c320475569e32ac013be052619d.jpeg"><meta data-vue-tag="ssr" name="author" content="Rodrigo Ghiorzi"><meta data-vue-tag="ssr" name="publish_date" content="10/09/2020"><link data-vue-tag="ssr" rel="icon" href="data:,"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="16x16" href="/assets/static/favicon.ce0531f.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="32x32" href="/assets/static/favicon.ac8d93a.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="icon" type="image/png" sizes="96x96" href="/assets/static/favicon.b9532cc.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="76x76" href="/assets/static/favicon.f22e9f3.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="152x152" href="/assets/static/favicon.62d22cb.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="120x120" href="/assets/static/favicon.1539b60.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="167x167" href="/assets/static/favicon.dc0cdc5.9bb7ffafafc09ac851d81afb65b8ef59.png"><link data-vue-tag="ssr" rel="apple-touch-icon" type="image/png" sizes="180x180" href="/assets/static/favicon.7b22250.9bb7ffafafc09ac851d81afb65b8ef59.png"><link rel="preload" href="/assets/css/0.styles.820c4209.css" as="style"><link rel="preload" href="/assets/js/app.7ccbc68a.js" as="script"><link rel="preload" href="/assets/js/page--src--templates--post-vue.de35c525.js" as="script"><link rel="prefetch" href="/assets/js/page--node-modules--gridsome--app--pages--404-vue.40158b50.js"><link rel="prefetch" href="/assets/js/page--src--pages--index-vue.bf594145.js"><link rel="prefetch" href="/assets/js/page--src--templates--tag-vue.3f8e1c71.js"><link rel="stylesheet" href="/assets/css/0.styles.820c4209.css"><noscript data-vue-tag="ssr"><style>.g-image--loading{display:none;}</style></noscript>
  </head>
  <body >
    <div id="app" data-server-rendered="true"><header class="header"><div class="header__left"><a href="/" class="logo active"><span class="logo__text"> ← </span></a></div></header><main class="main"><div class="post-title"><h1 class="post-title__text">
      Orientação a objetos (1) - lidando com estados sem o uso de estruturas condicionais
    </h1><div class="post-meta">
  Publicado em 10/09/2020
</div></div><div class="post content-box"><div class="post__header"><img alt="Cover image" src="data:image/svg+xml,%3csvg fill='none' viewBox='0 0 860 572' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink'%3e%3cdefs%3e%3cfilter id='__svg-blur-3cf74d91d8640e89ae433f348615928f'%3e%3cfeGaussianBlur in='SourceGraphic' stdDeviation='10'/%3e%3c/filter%3e%3c/defs%3e%3cimage x='0' y='0' filter='url(%23__svg-blur-3cf74d91d8640e89ae433f348615928f)' width='860' height='572' xlink:href='data:image/jpeg%3bbase64%2c/9j/2wBDAAYEBQYFBAYGBQYHBwYIChAKCgkJChQODwwQFxQYGBcUFhYaHSUfGhsjHBYWICwgIyYnKSopGR8tMC0oMCUoKSj/2wBDAQcHBwoIChMKChMoGhYaKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCj/wAARCAArAEADASIAAhEBAxEB/8QAGgAAAwADAQAAAAAAAAAAAAAABAUGAAMHAv/EACwQAAIBAwMCBQQDAQEAAAAAAAECAwAEEQUSIRMxBiJBYXEjMlGBkcHhYqH/xAAYAQADAQEAAAAAAAAAAAAAAAABAwQCAP/EACERAAICAAcAAwAAAAAAAAAAAAECABEDBBIhMUFRInGB/9oADAMBAAIRAxEAPwAeKRUjdiwC7RsT1omKctaM7jkRtnynKjHbFZE8QtXbZ5FH3MeeO2K8lzBpxDZG8khj3yfSgCQRARCmj26fD1MsVgVQF9/WjtAtTfXhRWdE6ZZpNpYRgfFT91csztCu5/oqdoPfAOaP0WWSSxdIriWGQbS4jYqQBkYz6jmtl9W0C0DZ4hzQRwao9rK0TovnhYAgvxyQDzisuFSOG4jCth/PhB2z3rdqMF90obyCOAmKNY0a4QkuvJPmHbH5r1dCKVm6McwVkjZi/wBhJUnCsPuHBoBgSyjqaZNIVj3FOnSvIkYyfKTv39/agdVRzbyruJVgdpHoc1RoixxcKvPlH6oK8iV4QVVWOQOPTFAKagv2KZJ4l0yZJo%2bmXO1SzjGT%2bPetd5OBp1qoBMU5AGWycjtmkFpK19OA5YlcbAMDHzRt6GMMChidp7k8Ul3o1OHsd21hNrKNYpJBZonLXchIWIZwBxyc9sU4sdGGmvP0LoXluFaGSVVZcSKwBHmGf6pTe6naWcFpBaWzJuId5ZXDM75/HYe1Umnas%2boxvbv2dSwyP2KfltJJDfkzmKVRpP3JbxjFfmaSXT7q7j6QUyxLIWVgVGTtz6UX4f1SSexubGdt6RoGRz7eo/8AaY6nAo1aZi2EZIyVHr5R3/ip3QENrrd/aE/SJOwfjIP%2bU5BTsBzuIpmJVb4EoocGHaqsQorU4KRuCAuPSvcTsEzGwIIrRctmLzYJxzzSVPYjiL5nLtIuQr7VYeZc7s8jFPFkC2cC7vquxOOal/CpzKc89hzVbsUiJscg8c1NiLvCDtN8l0ZoG6uDtI4C4Px71d6TYG1eyQqQyQrvP/RGSP1nFSWh2kF34g0%2bO4j6kfXU7STgnvz%2bxXQbclr6bdzlST81ZkU5YybMsdhEPiGVYtQJOFPQUn%2bDSMuqeJoR3yE3H5H%2b10LxFpNjc%2bFbi9mt1a6iG1JQSCB%2bDg8j5rlussY/EbsnBD8H4piKcPELHuYxmvDFR3HJ0gyBsmMlMAc98ULPLIjHBJVuCCe3vWak7LrEyqcKW3ED8kAmkOoyydYec8j%2b6gNoxA6lw%2bS3P//Z' /%3e%3c/svg%3e" width="860" data-src="/assets/static/Lidando%20com%20estados%20sem%20o%20uso%20de%20estruturas%20condicionais.07cc2b7.462f5c320475569e32ac013be052619d.jpeg" data-srcset="/assets/static/Lidando%20com%20estados%20sem%20o%20uso%20de%20estruturas%20condicionais.a67b0b2.462f5c320475569e32ac013be052619d.jpeg 480w, /assets/static/Lidando%20com%20estados%20sem%20o%20uso%20de%20estruturas%20condicionais.07cc2b7.462f5c320475569e32ac013be052619d.jpeg 860w" data-sizes="(max-width: 860px) 100vw, 860px" class="g-image g-image--lazy g-image--loading"><noscript><img src="/assets/static/Lidando%20com%20estados%20sem%20o%20uso%20de%20estruturas%20condicionais.07cc2b7.462f5c320475569e32ac013be052619d.jpeg" class="g-image g-image--loaded" width="860" alt="Cover image"></noscript></div><div class="post__content"><h2 id="introdução"><a href="#introdu%C3%A7%C3%A3o" aria-hidden="true"><span class="icon icon-link"></span></a>Introdução</h2>
<p>Há quem diga dominar o paradigma orientado a objetos e há quem considere questionável esta assertiva. Em qual destes grupos você se encaixa?</p>
<p>Apesar da orientação a objetos ser imensamente afamada, pode-se exprimir que é relativamente fácil esbarrar em códigos "orientados a objetos" escassos de objetos. Esta escassez é frequentemente preenchida com aspectos imperativos em demasia.</p>
<p>Permita-me, através deste artigo, expor um cenário para reflexionarmos sobre orientação a objetos.</p>
<h2 id="1-cenário"><a href="#1-cen%C3%A1rio" aria-hidden="true"><span class="icon icon-link"></span></a>1. Cenário</h2>
<p>Considere um simulador de banco em que seja possível <strong>depositar</strong>, <strong>sacar</strong>, <strong>fechar</strong>, <strong>ativar</strong> e <strong>congelar</strong> uma <strong>conta</strong>.</p>
<ul>
<li>Quando criada, uma conta tem seu estado valorado como ativa e seu saldo é equivalente a zero;</li>
<li>Quando fechada, uma conta não deve realizar as operaçōes depositar e sacar, entretanto, uma conta fechada pode alterar seu estado para ativa ou congelada;</li>
<li>Quando congelada, uma conta pode realizar as operaçōes depositar e sacar, no entanto, ao realizar algumas destas operaçōes, seu estado deve alterar para ativa. Naturalmente, uma conta congelada pode alterar seu estado para ativa ou fechada;</li>
<li>Quando ativa, uma conta pode realizar as operaçōes depositar e sacar. Similarmente, uma conta ativa pode alterar seu estado para congelada ou fechada;</li>
<li>Não há necessidade de validar o valor requisitado em um saque (não é foco do artigo, manteremos o mais simples possível);</li>
</ul>
<p><strong>Atenda os requisitos acima sem utilizar flags booleanas e estruturas condicionais</strong>.</p>
<p>Qual a sua solução para este problema?</p>
<h3 id="11-resolução"><a href="#11-resolu%C3%A7%C3%A3o" aria-hidden="true"><span class="icon icon-link"></span></a>1.1 Resolução</h3>
<p>Primeiramente, <strong>esqueça que flags, if, switch existem</strong>. Pense em objetos.</p>
<ul>
<li>Há três estados que uma conta pode assumir, iremos representá-los com objetos. Cada estado será um objeto;</li>
<li>Há dois comportamentos definidos de forma explícita: depositar e sacar. Estes comportamentos variam de acordo com o estado da conta, ou seja, a implementação de cada estado ficará responsável por representar a ação esperada destes comportamentos;</li>
<li>Há três comportamentos definidos de forma implícita: ativar uma conta, fechar uma conta e congelar uma conta. Outra vez, a implementação de cada estado ficará responsável por reproduzir estas ações;</li>
</ul>
<p>Seguindo estes princípios, podemos definir um contrato, o qual todo estado deve assinar:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="token keyword">internal</span> <span class="token keyword">interface</span> <span class="token class-name">IState</span>
<span class="token punctuation">{</span>
    <span class="token return-type class-name">IState</span> <span class="token function">Activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">IState</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">IState</span> <span class="token function">Deposit</span><span class="token punctuation">(</span><span class="token class-name">Action</span> onDeposit<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">IState</span> <span class="token function">Freeze</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token return-type class-name">IState</span> <span class="token function">Withdraw</span><span class="token punctuation">(</span><span class="token class-name">Action</span> onWithdraw<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<p>A partir de então, partimos para a implementação do estado fechado:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="token keyword">internal</span> <span class="token keyword">class</span> <span class="token class-name">Closed</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IState</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IState</span> <span class="token function">Activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Active</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">IState</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">IState</span> <span class="token function">Deposit</span><span class="token punctuation">(</span><span class="token class-name">Action</span> onDeposit<span class="token punctuation">)</span>
        <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">IState</span> <span class="token function">Freeze</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Frozen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">IState</span> <span class="token function">Withdraw</span><span class="token punctuation">(</span><span class="token class-name">Action</span> onWithdraw<span class="token punctuation">)</span>
        <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre>
<ul>
<li>Activate: uma conta fechada pode alterar seu estado para ativa. Ao ativar uma conta que estava fechada, um objeto (Active) é retornado;</li>
<li>Close: Ao "fechar" uma conta já fechada, nada é feito, pois a mesma já estava fechada, portanto, é retornado o próprio objeto;</li>
<li>Deposit: uma conta fechada não deve realizar a operação de depósito, neste caso nenhum comportamento é executado, além de retornar o próprio objeto;</li>
<li>Freeze: uma conta fechada pode alterar seu estado para congelada. Ao congelar uma conta que estava fechada, um objeto (Frozen) é retornado;</li>
<li>Withdraw: uma conta fechada não deve realizar a operação de saque, neste caso nenhum comportamento é executado, além de retornar o próprio objeto.</li>
</ul>
<p>Até aqui, o que estamos usando mesmo? <strong>Objetos</strong>!</p>
<p>Implementação do estado congelado:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="token keyword">internal</span> <span class="token keyword">class</span> <span class="token class-name">Frozen</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IState</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IState</span> <span class="token function">Activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Active</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
     
    <span class="token keyword">public</span> <span class="token return-type class-name">IState</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Closed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">IState</span> <span class="token function">Deposit</span><span class="token punctuation">(</span><span class="token class-name">Action</span> onDeposit<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">onDeposit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token function">Activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">IState</span> <span class="token function">Freeze</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">IState</span> <span class="token function">Withdraw</span><span class="token punctuation">(</span><span class="token class-name">Action</span> onWithdraw<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">onWithdraw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token function">Activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<ul>
<li>Activate: uma conta congelada pode alterar seu estado para ativa. Ao ativar uma conta que estava congelada, um objeto (Active) é retornado;</li>
<li>Close: uma conta congelada pode alterar seu estado para fechada. Ao fechar uma conta que estava congelada, um objeto (Closed) é retornado;</li>
<li>Deposit: uma conta congelada pode realizar a operação de depósito, entretanto, ao realizar esta operação, seu estado deve alterar para ativa. Portanto, após a ação ser feita, um objeto (Active) é retornado;</li>
<li>Freeze: Ao "congelar" uma conta já congelada, nada é feito, pois a mesma já estava congelada, portanto, é retornado o próprio objeto;</li>
<li>Withdraw: uma conta congelada pode realizar a operação de saque, entretanto, ao realizar esta operação, seu estado deve alterar para ativa. Portanto, após a ação ser feita, um objeto (Active) é retornado;</li>
</ul>
<p>Implementação do estado ativo:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="token keyword">internal</span> <span class="token keyword">class</span> <span class="token class-name">Active</span> <span class="token punctuation">:</span> <span class="token type-list"><span class="token class-name">IState</span></span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">IState</span> <span class="token function">Activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">=></span> <span class="token keyword">this</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">IState</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Closed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">IState</span> <span class="token function">Deposit</span><span class="token punctuation">(</span><span class="token class-name">Action</span> onDeposit<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">onDeposit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">IState</span> <span class="token function">Freeze</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Frozen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">IState</span> <span class="token function">Withdraw</span><span class="token punctuation">(</span><span class="token class-name">Action</span> onWithdraw<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token function">onWithdraw</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<ul>
<li>Activate: Ao "ativar" uma conta já ativa, nada é feito, pois a mesma já estava ativa, portanto, é retornado o próprio objeto;</li>
<li>Close: uma conta ativa pode alterar seu estado para fechada. Ao fechar uma conta que estava ativa, um objeto (Closed) é retornado;</li>
<li>Deposit: uma conta ativa pode realizar a operação de depósito;</li>
<li>Freeze: uma conta ativa pode alterar seu estado para congelada. Ao congelar uma conta que estava ativa, um objeto (Frozen) é retornado;</li>
<li>Withdraw: uma conta congelada pode realizar a operação de saque;</li>
</ul>
<p>Enfim, isto feito, podemos codificar a nossa conta:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="token keyword">public</span> <span class="token keyword">readonly</span> <span class="token keyword">struct</span> <span class="token class-name">Amount</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">readonly</span> <span class="token return-type class-name"><span class="token keyword">decimal</span></span> Value 
        <span class="token operator">=></span> _value<span class="token punctuation">;</span> 

    <span class="token keyword">private</span> <span class="token keyword">readonly</span> <span class="token class-name"><span class="token keyword">decimal</span></span> _value<span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token function">Amount</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">decimal</span></span> amount<span class="token punctuation">)</span>
        <span class="token operator">=></span> _value <span class="token operator">=</span> amount<span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">implicit</span> <span class="token keyword">operator</span> <span class="token function">Amount</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">decimal</span></span> amount<span class="token punctuation">)</span> 
        <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Amount</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">explicit</span> <span class="token keyword">operator</span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token class-name">Amount</span> amount<span class="token punctuation">)</span> 
        <span class="token operator">=></span> amount<span class="token punctuation">.</span>_value<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">LessThanOrEqualTo</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">decimal</span></span> <span class="token keyword">value</span><span class="token punctuation">)</span>
        <span class="token operator">=></span> _value<span class="token punctuation">.</span><span class="token function">LessThanOrEqualTo</span><span class="token punctuation">(</span><span class="token keyword">value</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span> 

<span class="token keyword">public</span> <span class="token keyword">readonly</span> <span class="token keyword">struct</span> <span class="token class-name">Balance</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">readonly</span> <span class="token return-type class-name"><span class="token keyword">decimal</span></span> Value <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>

    <span class="token keyword">private</span> <span class="token function">Balance</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">decimal</span></span> balance<span class="token punctuation">)</span>
        <span class="token operator">=></span> Value <span class="token operator">=</span> balance<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">implicit</span> <span class="token keyword">operator</span> <span class="token function">Balance</span><span class="token punctuation">(</span><span class="token class-name"><span class="token keyword">decimal</span></span> balance<span class="token punctuation">)</span>
        <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Balance</span><span class="token punctuation">(</span>balance<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">explicit</span> <span class="token keyword">operator</span> <span class="token keyword">decimal</span><span class="token punctuation">(</span><span class="token class-name">Balance</span> balance<span class="token punctuation">)</span>
        <span class="token operator">=></span> balance<span class="token punctuation">.</span>Value<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">Balance</span> <span class="token function">Increase</span><span class="token punctuation">(</span><span class="token class-name">Amount</span> amount<span class="token punctuation">)</span>
        <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Balance</span><span class="token punctuation">(</span>Value <span class="token operator">+</span> amount<span class="token punctuation">.</span>Value<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">Balance</span> <span class="token function">Decrease</span><span class="token punctuation">(</span><span class="token class-name">Amount</span> amount<span class="token punctuation">)</span>
        <span class="token operator">=></span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Balance</span><span class="token punctuation">(</span>Value <span class="token operator">-</span> amount<span class="token punctuation">.</span>Value<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name"><span class="token keyword">bool</span></span> <span class="token function">GreaterOrEqualTo</span><span class="token punctuation">(</span><span class="token class-name">Amount</span> amount<span class="token punctuation">)</span>
        <span class="token operator">=></span> amount<span class="token punctuation">.</span><span class="token function">LessThanOrEqualTo</span><span class="token punctuation">(</span>Value<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">Account</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token return-type class-name">Balance</span> Balance <span class="token punctuation">{</span> <span class="token keyword">get</span><span class="token punctuation">;</span> <span class="token keyword">private</span> <span class="token keyword">set</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
    
    <span class="token keyword">private</span> <span class="token class-name">IState</span> _state<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Action<span class="token punctuation">&lt;</span>Amount<span class="token punctuation">></span></span> _deposit<span class="token punctuation">;</span>
    <span class="token keyword">private</span> <span class="token class-name">Action<span class="token punctuation">&lt;</span>Amount<span class="token punctuation">></span></span> _withdraw<span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token function">Account</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_state <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Active</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">this</span><span class="token punctuation">.</span>_deposit <span class="token operator">=</span> amount <span class="token operator">=></span> Balance <span class="token operator">=</span> Balance<span class="token punctuation">.</span><span class="token function">Increase</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">this</span><span class="token punctuation">.</span>_withdraw <span class="token operator">=</span> amount <span class="token operator">=></span> Balance <span class="token operator">=</span> Balance<span class="token punctuation">.</span><span class="token function">Decrease</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> 
    
    <span class="token keyword">public</span> <span class="token return-type class-name">Account</span> <span class="token function">Activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">=></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> _state<span class="token punctuation">.</span><span class="token function">Activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">Account</span> <span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">=></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> _state<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">Account</span> <span class="token function">Freeze</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token operator">=></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> _state<span class="token punctuation">.</span><span class="token function">Freeze</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">Account</span> <span class="token function">Deposit</span><span class="token punctuation">(</span><span class="token class-name">Amount</span> amount<span class="token punctuation">)</span>
        <span class="token operator">=></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> _state<span class="token punctuation">.</span><span class="token function">Deposit</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">_deposit</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token return-type class-name">Account</span> <span class="token function">Withdraw</span><span class="token punctuation">(</span><span class="token class-name">Amount</span> amount<span class="token punctuation">)</span>
        <span class="token operator">=></span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> _state<span class="token punctuation">.</span><span class="token function">Withdraw</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token function">_withdraw</span><span class="token punctuation">(</span>amount<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">private</span> <span class="token return-type class-name">Account</span> <span class="token function">Update</span><span class="token punctuation">(</span><span class="token class-name">Func<span class="token punctuation">&lt;</span>IState<span class="token punctuation">></span></span> onChange<span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        _state <span class="token operator">=</span> <span class="token function">onChange</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre>
<p>A magia está presente na orquestração de estado, onde um objeto do tipo Account se comunica com um objeto do tipo IState, através de uma abordagem polimórfica.</p>
<p>Considerando que cada estado (objeto) mantém os próprios comportamentos, é necessário, portanto, apenas instrumentar a troca de estado (objeto) mediante ao objeto do tipo Account.</p>
<p>Na prática o uso deste objeto poderá ser feito da seguinte maneira:</p>
<pre class="language-csharp"><code class="language-csharp"><span class="token class-name"><span class="token keyword">decimal</span></span> balance <span class="token operator">=</span>
    <span class="token keyword">new</span> <span class="token constructor-invocation class-name">Account</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// starts as active account</span>
    <span class="token punctuation">.</span><span class="token function">Deposit</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span> <span class="token comment">// 200</span>
    <span class="token punctuation">.</span><span class="token function">Deposit</span><span class="token punctuation">(</span><span class="token number">300</span><span class="token punctuation">)</span> <span class="token comment">// 500</span>
    <span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// it turns to close, so it cannot deposit or withdraw</span>
    <span class="token punctuation">.</span><span class="token function">Deposit</span><span class="token punctuation">(</span><span class="token number">5000</span><span class="token punctuation">)</span> <span class="token comment">// do nothing</span>
    <span class="token punctuation">.</span><span class="token function">Withdraw</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span> <span class="token comment">// do nothing</span>
    <span class="token punctuation">.</span><span class="token function">Freeze</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// it turns to freeze, so it will turn to active if deposit or withdraw </span>
    <span class="token punctuation">.</span><span class="token function">Deposit</span><span class="token punctuation">(</span><span class="token number">500</span><span class="token punctuation">)</span> <span class="token comment">// 1000 then turn to active </span>
    <span class="token punctuation">.</span><span class="token function">Freeze</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// it turns to freeze, so it will turn to active if deposit or withdraw </span>
    <span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// it turns to close, so it cannot deposit or withdraw</span>
    <span class="token punctuation">.</span><span class="token function">Deposit</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span> <span class="token comment">// do nothing</span>
    <span class="token punctuation">.</span><span class="token function">Activate</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">Deposit</span><span class="token punctuation">(</span><span class="token number">2000</span><span class="token punctuation">)</span> <span class="token comment">// 3000 </span>
    <span class="token punctuation">.</span>Balance
    <span class="token punctuation">.</span>Value<span class="token punctuation">;</span>

<span class="token function">WriteLine</span><span class="token punctuation">(</span>balance<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 3000</span></code></pre>
<h2 id="palavras-finais"><a href="#palavras-finais" aria-hidden="true"><span class="icon icon-link"></span></a>Palavras finais</h2>
<p>Quão orientado a objetos é o código que tu escreves? Você acredita realmente tirar um bom proveito dos recursos que a orientação a objetos prove para ti?</p>
</div></div></main></div>
    <script src="/assets/js/app.7ccbc68a.js" defer></script><script src="/assets/js/page--src--templates--post-vue.de35c525.js" defer></script>
  </body>
</html>